# 🚀 Smart Investment Sentinel - 升级日志 (v2.0)

嗨！我在原有项目的基础上进行了深度重构和功能增强。主要是为了解决中文支持问题，并引入了真实的爬虫和数据库环境。

以下是具体的修改内容清单：

## ✨ 核心功能升级

### 1. 数据源 (Data Loader)
- **行情数据**：将 `yfinance` (美股为主) 替换为 **Tushare** (A股数据)。
  - *原因*：更适合获取国内股票（如茅台 600519.SH）数据。
  - *状态*：已内置我的 Token，开箱即用。
- **新闻爬虫**：实现了**真·爬虫**逻辑。
  - 策略：优先爬取 **中国新闻网** -> 失败则尝试 **新浪财经** -> 再次失败则自动降级为 **模拟数据** (兜底)。
  - *改进*：保证了演示时的稳定性，断网也能跑。

### 2. 自然语言处理 (NLP)
- **情感分析**：移除了对中文支持较差的 `TextBlob`，替换为 **SnowNLP**。
  - *效果*：能准确识别中文语境下的积极/消极情绪。
- **分词与关键词**：引入 **Jieba (结巴分词)**。
  - *效果*：解决了关键词提取不准确的问题，现在能通过 TF-IDF 算法提取核心金融词汇。

### 3. 数据库 (Database)
- **迁移**：从轻量级的 `SQLite` 迁移到了企业级的 **MySQL**。
  - *配置*：使用了 `SQLAlchemy` + `PyMySQL`。
  - *新增功能*：在前端增加了 **“清空历史记录”** 的红色按钮，方便调试。

## 🎨 可视化与 UI 优化

### 1. 词云升级 (WordCloud)
- **爱心形状**：引入了 `love.png` 作为蒙版，生成的词云现在是爱心形状的。
- **字体修复**：增加了**跨平台字体检测**代码，自动识别 Mac (苹方) 和 Windows (微软雅黑/黑体)，彻底解决了中文方框乱码问题。
- **配色**：调整为红色系，更符合 A 股“红涨”的审美。

### 2. 界面排版 (Streamlit)
- **仪表盘布局**：重构了 `app.py`，使用 Grid 布局。顶部展示关键指标，中间是 K线主图，底部是辅助图表。
- **自定义分析**：修复了侧边栏“自定义文本分析”的交互，现在使用 Form 表单提交，结果更稳定且高亮显示。

---

## 🛠️ 如何运行 (必读)

由于引入了新库和 MySQL，请按以下步骤配置环境：

### 1. 安装新依赖
```bash
pip install -r requirements.txt